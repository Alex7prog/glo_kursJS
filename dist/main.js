(()=>{"use strict";const e=function(e,t){const n=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),r=document.querySelector("#timer-seconds");function s(e){return e<10?"0"+e:e.toString()}!function(){const a=function(){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/60/60),minutes:o,seconds:n}}();a.timeRemaining>=0?(n.textContent=s(a.hours),o.textContent=s(a.minutes),r.textContent=s(a.seconds)):(n.textContent="00",o.textContent="00",r.textContent="00",t&&clearInterval(t))}()},t="11 january 2021";let n=null;e(t,n),n=setInterval(e,1e3,t),(()=>{const e=document.querySelector("menu"),t=e=>{const t=e.target.closest("a"),n=document.querySelector(t.getAttribute("href"));e.preventDefault(),n.scrollIntoView({behavior:"smooth"})};document.querySelector('[href="#service-block"]').addEventListener("click",(e=>{t(e)}));const n=()=>{e.classList.toggle("active-menu")};document.addEventListener("click",(o=>{const r=o.target;o.target.closest("menu")?r.matches(".close-btn")?n():"A"===r.tagName&&(t(o),n()):e.classList.contains("active-menu")&&n(),r.closest(".menu")&&n()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content");let o,r,s=0;const a=()=>{e.style.display="block",screen.width>=768?(o=requestAnimationFrame(a),s++,r=20*s-603,r<-50?n.style.transform=`translateX(${r}px)`:(cancelAnimationFrame(o),s=0)):n.style.transform="translateX(-50px)"},c=()=>{screen.width>=768?(o=requestAnimationFrame(c),s++,r=-50-20*s,r>-603?n.style.transform=`translateX(${r}px)`:(cancelAnimationFrame(o),e.style.display="none",s=0)):(e.style.display="none",n.style.transform="translateX(-603px)")};t.forEach((e=>{e.addEventListener("click",a)})),e.addEventListener("click",(e=>{let t=e.target;t.matches(".popup-close")?c():(t=t.closest(".popup-content"),t||c())})),e.addEventListener("submit",(e=>{e.preventDefault(),setTimeout(c,5e3)}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,r)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)e===o?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(r)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),n=document.querySelector(".portfolio-content");let o,r=0;for(let n=0;n<e.length;n++){const e=document.createElement("li");e.className="dot",t.appendChild(e)}const s=document.querySelectorAll(".dot");s[0].classList.add("dot-active");const a=(e,t,n)=>{e[t].classList.remove(n)},c=(e,t,n)=>{e[t].classList.add(n)},l=()=>{a(e,r,"portfolio-item-active"),a(s,r,"dot-active"),r++,r>=e.length&&(r=0),c(e,r,"portfolio-item-active"),c(s,r,"dot-active")},i=(e=1500)=>{o=setInterval(l,e)};n.addEventListener("click",(t=>{t.preventDefault();const n=t.target;n.matches(".portfolio-btn, .dot")&&(a(e,r,"portfolio-item-active"),a(s,r,"dot-active"),n.matches("#arrow-right")?(r++,r>=e.length&&(r=0)):n.matches("#arrow-left")?(r--,r<0&&(r=e.length-1)):n.matches(".dot")&&s.forEach(((e,t)=>{e===n&&(r=t)})),c(e,r,"portfolio-item-active"),c(s,r,"dot-active"))})),n.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(o)})),n.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&i()})),i()})(),(()=>{const e=document.getElementById("command");e.addEventListener("mouseover",(e=>{const t=e.target;t.dataset.imgSrcStore=t.src,t.src=t.dataset.img})),e.addEventListener("mouseout",(e=>{const t=e.target;t.src=t.dataset.imgSrcStore}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),s=document.querySelector(".calc-day"),a=document.getElementById("total");t.addEventListener("input",(e=>{const t=e.target;t.matches("input")&&(t.value=t.value.replace(/[^\d]/g,""))})),t.addEventListener("change",(()=>{(()=>{let t=0,c=1,l=1;const i=n.options[n.selectedIndex].value,u=+o.value;if(0===n.selectedIndex)return o.value="",r.value="",s.value="",void(a.textContent="");r.value&&r.value>1&&(c+=(r.value-1)/10),s.value&&s.value<5?l*=2:s.value&&s.value<10&&(l*=1.5),i&&u&&(t=Math.floor(e*i*u*+c*l));let d,m=+a.textContent,v=Math.floor(Math.abs(t-m)/10);const h=()=>{m<t?(m+=v,m>t&&(m=t)):m>t&&(m-=v,m<0&&(m=0)),a.textContent=m,m!==t?requestAnimationFrame(h):cancelAnimationFrame(d)};0!==t&&(d=requestAnimationFrame(h))})()}))})(100),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),o=document.createElement("div"),r=new Map([["user_name",/[^А-яЁё\s]+$/],["user_email",/[^A-z0-9_@\.]/],["user_phone",/[^+?\d]/],["user_message",/[^[А-яЁё\s\,\.\:\-\;\!\?]+$/]]),s=new Map([["user_name",/[А-яЁё\s]+/],["user_email",/^[^\s@]+@[^\s@]+\.[^\s@]+$/],["user_phone",/^\+?\d+$/],["user_message",/[А-яЁё\s\,\.\:\-\;\!\?]/]]),a=new Map([["user_name","Используйте ввод только кириллицы и пробелов."],["user_email","Используйте латинские буквы, @ и точку"],["user_phone","Укажите номер телефона в формате: + 12 цифр или 12 цифр."],["user_message","Используйте ввод только кириллицы, пробелов, цифр и знаков препинания."]]);o.style.cssText="font-size: 2rem; color: white;";const c=e=>{e.preventDefault();const t=e.target,n=t.querySelectorAll("input");let r=!0;if(n.forEach((e=>{if(s.get(e.name).test(e.value))e.style.border="solid green",setTimeout((()=>{e.style.border=""}),3e3);else{const n=document.createElement("div");r=!1,n.style.color="orangered",t.append(n),n.textContent=`Неверный формат данных. Введите "${e.placeholder}" еще раз.`,e.style.border="solid orangered",setTimeout((()=>{e.style.border=""}),3e3),setTimeout((()=>{n.remove()}),3e3)}})),!r)return;const a=new FormData(t),c={};a.forEach(((e,t)=>{c[t]=e})),t.appendChild(o),o.textContent="Загрузка...",(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(c).then((e=>{if(200!==e.status)throw new Error("status network not 200");o.textContent="Спасибо! Мы скоро с вами свяжемся!",n.forEach((e=>e.value=""))})).catch((e=>{o.textContent="Что-то пошло не так",console.error(e)})),setTimeout((()=>{o.remove()}),4e3)},l=function(){const e=r.get(this.name);this.title=a.get(this.name),"user_phone"===this.name?("+"===this.value[0]?this.value=this.value.replace(e,""):this.value.length>0&&(this.value="+"+this.value.replace(e,"")),this.value.length>=13&&(this.value=this.value.substr(0,13))):this.value=this.value.replace(e,"")};e.setAttribute("novalidate",!0),e.addEventListener("submit",c),t.setAttribute("novalidate",!0),t.addEventListener("submit",c),n.setAttribute("novalidate",!0),n.addEventListener("submit",c),document.addEventListener("click",(e=>{const t=e.target;r.has(t.name)&&t.closest("form").querySelector(`[name="${t.name}"]`).addEventListener("input",l)}))})()})();